<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8;">
	<meta http-equiv="Cache-Control" content="public;">
	<meta name="robots" content="index,follow">
	<meta name="viewport" content="width=device-width, maximum-scale=1.0" />
	<meta name="author" content="Yang Shun Tay">
	<meta name="copyright" content="Copyright Yang Shun Tay. All Rights Reserved.">
	<meta name="description" content="This is a prototype of a contest platform where users can create Python turtle art and share them with the world. People can also 'upvote' the python turtle art created.">
	<meta name="keywords" content="python, turtle, python turtle, art, cs1010s, skulpt">
	<!-- Facebook Open Graph -->
	<meta property="og:title" content="Turtlepie">
	<meta property="og:description" content="Prototype of a contest platform where users can create Python turtle art and share them with the world. People can also 'upvote' the python turtle art created.">
	<meta property="og:site_name" content="">
	<meta property="og:type" content="website">
	<meta property="og:image" content="">    
	<!-- General essentials -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
	<link href="css/normalize.css" rel="stylesheet">
	<script type="text/javascript" src="js/custom.modernizr.js"></script>
	<!-- Typekit -->
	<script type="text/javascript" src="//use.typekit.net/bxj4lbj.js"></script>
	<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<!-- Bootstrap -->
	<link rel="icon" type="image/png" href="img/favicon.png">
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<!-- Codemirror -->

	<link href="css/codemirror/codemirror.css" rel="stylesheet">
	<script src="js/codemirror/codemirror.js" type="text/javascript"></script>
	<script src="js/codemirror/matchbrackets.js" type="text/javascript"></script>
	<script src="js/codemirror/python.js" type="text/javascript"></script>
	<link href="http://codemirror.net/theme/twilight.css" rel="stylesheet">
	<!-- Skulpt -->
	<script src="js/skulpt/skulpt.js" type="text/javascript"></script>
	<script src="js/skulpt/builtin.js" type="text/javascript"></script>
	<!-- Shortcuts -->
	<script src="js/shortcut.js" type="text/javascript"></script>
	<!-- Custom styling -->
	<link href="css/style.css" rel="stylesheet">
	
	<title>Turtlepie</title>
	<script type="text/javascript"> 
		// output functions are configurable.  This one just appends some text
		// to a pre element.
		function outf(text) { 
		    var mypre = document.getElementById("output"); 
		    mypre.innerHTML = mypre.innerHTML + text; 
		} 
		function builtinRead(x) {
		    if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined)
		            throw "File not found: '" + x + "'";
		    return Sk.builtinFiles["files"][x];
		}
		 
		// Here's everything you need to run a python program in skulpt
		// grab the code from your textarea
		// get a reference to your pre element for output
		// configure the output function
		// call Sk.importMainWithBody()
		function runit() { 
		   var prog = myCodeMirror.getValue(); 
		   var mypre = document.getElementById("output"); 
		   mypre.innerHTML = ''; 
		   Sk.canvas = "turtle-canvas";
		   Sk.pre = "output";
		   Sk.configure({output:outf, read:builtinRead}); 
		   eval(Sk.importMainWithBody("<stdin>",false,prog)); 
		} 

		// clears the editor
		function clearEditor() {
			myCodeMirror.setValue(defaultCode);
			myCodeMirror.focus();
		}
		
		var myCodeMirror;

		$(document).ready(function() {

			myCodeMirror = CodeMirror.fromTextArea(document.getElementById("yourcode"), {
				mode: {name: "python",
               		version: 2,
               		singleLineStringErrors: false},
		        lineNumbers: true,
		        textWrapping: false,
		        indentUnit: 2,
		        indentWithTabs: true,
		        tabSize: 2,
		        theme: 'twilight',
		        autofocus: true
			});

			shortcut.add("Meta+Enter",function() {
				runit();
			},{'type':'keydown',
				'propagate':false,
				'target':document
			});
			shortcut.add("Ctrl+Enter",function() {
				runit();
			},{'type':'keydown',
				'propagate':false,
				'target':document
			});

			myCodeMirror.setValue(spiralCode);
		})

		function setCode(type) {
			switch (type) {
				case 'spiral':
					myCodeMirror.setValue(spiralCode);
					break;
				case 'star':
					myCodeMirror.setValue(starCode);
					break;
				case 'circle':
					myCodeMirror.setValue(circleCode);
					break;
			}
		}

		var spiralCode = "import turtle\n\nt = turtle.Turtle()\n\nx = 50\n\nfor i in range(5):\n\tfor c in ['red', 'green', 'orange', 'blue']:\n\t\tt.color(c)\n\t\tt.forward(x)\n\t\tt.left(91)\n\t\tx = x+5";

		var circleCode = "import turtle\n\nt = turtle.Turtle()\n\nx = 2\n\nfor i in range(180):\n\tt.forward(x)\n\tt.left(2)\n";

		var starCode = "import turtle\n\nt = turtle.Turtle()\n\nn = 5\nx = 50\n\nfor i in range(n*2):\n\t\tt.forward(x)\n\t\tif i%2 == 0:\n\t\t\tt.left(180-36)\n\t\telse:\n\t\t\tt.right(90-36/2)";
		
		var defaultCode = "import turtle\n\nt = turtle.Turtle()";
	</script> 
</head>
<body>
	<header class="navigation">
		<div class="container">
			<div class="row">
				<a href="#" class="navigation-logo-link">
					<img class="navigation-logo" src="img/turtle-pie-logo-small.png">
					<span>TurtlePie</span>
				</a>
				<ul>
					<li><a href="#">Gallery</a></li>
					<li><a href="#">Create</a></li>
					<li><a href="#">About</a></li>
				</ul>
			</div>
		</div>
	</header>

	<div class="container" id="main-content">
		<div class="row">
			<div class="span12">
				<h1>Turtle Art Creator</h1>
				<p>Python Turtle is really awesome and cool! Check out the documentation at the official Python docs <a href="http://docs.python.org/2/library/turtle.html" target="_blank">here</a>.</p>
				<hr/>
			</div>
		</div>
		<div class="row">
			<div class="span7">
				<h3>Code</h2>
				<textarea id="yourcode" cols="40" rows="10"></textarea><br />
				<p style="display:inline-block">Code Samples: 
					<a href="#" onclick="setCode('circle')">Circle</a> |
					<a href="#" onclick="setCode('star')">Star</a> |
					<a href="#" onclick="setCode('spiral')">Spiral</a> 
					<br/>
					<strong>Tip: Press Ctrl/Cmd+Enter to run</strong>
				</p>
				<button class="button run-button" onclick="runit()">Run</button> 
				<button class="button clear-button" onclick="clearEditor()">Clear</button> 
	 		</div>
			<div class="span5">	 		
				<h3>Canvas</h3>
				<canvas id="turtle-canvas" width="380" height="380"></mycanvas> 
			</div>
		</div>
		<hr/>
		<div class="row">
			<div class="span12">
				<h3>Console</h3>
				<pre id="output" ></pre>  
			</div>
		</div>
</body>
</html>